<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gen Z Vs Gen Téléteubé - Game 5</title>
    <style>
        /* General body styling */
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
        }

        /* Title */
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }

        /* Instructions */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;
            max-height: 300px;
        }

        /* Game area */
        #gameArea {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #b71c1c;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }

        /* Button styles */
        #start-btn, #word-input {
            padding: 10px 20px;
            margin: 10px;
            font-size: 1.5em;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #start-btn {
            background-color: #388e3c;
            color: white;
            border: none;
            cursor: pointer;
        }

        #start-btn:hover {
            background-color: #2e7d32;
        }

        /* Timer and score styling */
        #timer, #score {
            font-size: 1.8em;
            margin: 15px;
            color: #1565c0;
        }
    </style>
</head>
<body>
    <h1>Gen Z Vs Gen Téléteubé</h1>
    
    <!-- Game instructions -->
    <div id="instructions">
        <p>Bienvenue dans le test de vitesse de frappe! Tapez le plus grand nombre de mots possible en 1 minute.</p>
        <p>Les mots apparaîtront un par un. Appuyez sur "Entrée" après avoir tapé chaque mot.</p>
        <p>Votre score final sera calculé en multipliant le nombre de mots tapés par deux. Bonne chance!</p>
    </div>

    <div id="userStatus"></div>
    <div id="gameArea">
        <button id="start-btn">Commencer le jeu</button>
        <div id="timer">Temps restant: 60s</div>
        <div id="score">Score actuel: 0</div>
        <input type="text" id="word-input" placeholder="Tapez le mot ici" disabled />
        <div id="word-display" style="font-size: 1.8em; color: #333; margin-top: 15px;"></div>
    </div>

    <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let userId = '';
        let typedWords = 0;
        let playCount = 0;
        let totalPlayCountGame5 = 0;
        let highestScore = 0;
        let currentWord = '';
        let timerInterval;

        const startBtn = document.getElementById('start-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');
        const wordDisplay = document.getElementById('word-display');
        const wordInput = document.getElementById('word-input');

        const wordList = [
    "abandon", "abaisser", "abandonner", "abandon", "abeille", "abondance", "abord", "aboyer", "abri", "absence",
    "absolu", "absolument", "absorber", "abuser", "académie", "accepter", "accompagnement", "accord", "accorder", "accueillir",
    "accusation", "accuser", "achèvement", "acheter", "achat", "acheteur", "achèvement", "adieu", "admirer", "adolescent",
    "adoption", "adresser", "affaire", "affectif", "afficher", "affirmer", "affrontement", "age", "agence", "agitation",
    "agricole", "agriculture", "ajouter", "ajustement", "alerte", "allemand", "alliance", "allumer", "alors", "alterner",
    "amateur", "ambiance", "ambition", "ami", "amitié", "amour", "analyser", "anecdote", "ancien", "année",
    "annoncer", "annonce", "annoncer", "annuaire", "anonyme", "antécédent", "anthropologie", "appareil", "appartement", "apparence",
    "appeler", "appétit", "apporter", "apprécier", "approcher", "approfondir", "arbre", "arrière", "arriver", "artiste",
    "assez", "assistance", "assurer", "assumer", "association", "astuce", "attendre", "attitude", "attitude", "attraper",
    "audace", "aujourd'hui", "augmenter", "aura", "autant", "auteur", "automatique", "autre", "avance", "avantage",
    "avent", "avenir", "avion", "avocat", "avoir", "bâti", "bâtiment", "beaucoup", "beau", "beauté",
    "berceau", "besoin", "bêtise", "bête", "bibliothèque", "bien", "biens", "bizarre", "blague", "blesser",
    "boire", "bois", "bonheur", "bonté", "boulanger", "boutique", "bruit", "bulle", "bureau", "cadenas",
    "café", "calme", "canard", "caractère", "carrefour", "carrière", "carte", "cas", "catégorie", "cause",
    "chaîne", "chanson", "chapitre", "chaque", "chaud", "chemin", "cheval", "chef", "chiffre", "choisir",
    "choix", "ciel", "cigarette", "cinq", "circuit", "citron", "classe", "climat", "clinique", "cloche",
    "coeur", "collège", "comment", "commun", "compagnie", "compte", "compter", "confiance", "confort", "connaître",
    "conscience", "conséquence", "construire", "consultation", "contact", "content", "contexte", "contrôle", "conversation", "copain",
    "corps", "cour", "courant", "court", "coup", "couverture", "crédit", "creux", "croire", "croissance",
    "cuisine", "début", "débuter", "découverte", "décroître", "définir", "départ", "développer", "développement", "développement",
    "difficile", "direct", "direction", "discuter", "distraction", "divers", "document", "dollar", "donner", "donneur",
    "dormir", "douceur", "drapeau", "échelle", "éclair", "école", "économie", "éducation", "effet", "effort",
    "effrayer", "élève", "énergie", "enfant", "environnement", "ensemble", "entreprise", "envers", "épicerie", "époque",
    "esprit", "esthétique", "état", "étude", "exemple", "exiger", "existant", "expérience", "exposition", "exprimer",
    "façon", "fête", "fier", "figurer", "fille", "finir", "flamme", "floraison", "foi", "fond",
    "forêt", "fort", "français", "fraternité", "fréquence", "frisson", "froid", "gagner", "garantir", "garde",
    "gâteau", "général", "génération", "gérer", "geste", "groupe", "guérir", "habitude", "habitation", "hauteur",
    "heure", "heureux", "histoire", "homme", "honneur", "idée", "immédiatement", "importance", "impression", "inauguration",
    "incapable", "inconnu", "information", "inspiration", "installer", "intelligence", "interroger", "interview", "intime", "invention",
    "jour", "jouer", "jouet", "juge", "juin", "juillet", "juste", "labo", "langue", "lien",
    "limite", "livre", "loi", "loisir", "lueur", "magie", "maison", "marcher", "marche", "mariage",
    "marque", "matériel", "maîtrise", "mémoire", "méthode", "mettre", "milieu", "miser", "moi", "monde",
    "mot", "mouvement", "mur", "musique", "nature", "navire", "négation", "nourriture", "nouveau", "nuage",
    "nuit", "obstacle", "océan", "offrir", "opération", "opinion", "ordre", "origine", "oublier", "parcours",
    "parler", "partager", "partenaire", "passage", "passer", "patience", "pays", "peinture", "peu", "photo",
    "physique", "plage", "plante", "plaisir", "pleurer", "pluie", "politique", "pomme", "poésie", "point",
    "poivre", "populaire", "position", "possibilité", "pouvoir", "préparation", "présentation", "problème", "produit", "progression",
    "promesse", "proposition", "protection", "public", "quitter", "quelque", "quelquefois", "quand", "quatre", "racine",
    "rapide", "réaction", "réalité", "réaliser", "réflexion", "référent", "réseau", "réussite", "réveil", "révision",
    "révolte", "riche", "risque", "romantique", "sac", "savoir", "situation", "sourire", "spectacle", "spectateur",
    "sphère", "spirale", "station", "structure", "succès", "tâche", "table", "tâtonner", "talent", "téléphone",
    "température", "temps", "terme", "terre", "texte", "théâtre", "thème", "ton", "tour", "tranche",
    "transporter", "tromper", "trouver", "tune", "urgence", "utiliser", "valeur", "valise", "vanter", "vendre",
    "vent", "village", "vocation", "voici", "voiture", "volonté", "votre", "voyage", "yoga", "zèbre",
    "abaisser", "abandonner", "abbé", "aberration", "abîme", "abscisse", "abstrait", "acajou", "accident", "accorder",
    "accroître", "acquérir", "actif", "adaptation", "adéquat", "adverse", "affairisme", "affairiste", "affection", "agence",
    "aggravation", "agrément", "ahurissant", "aimable", "ajustement", "alarme", "alimentation", "allergie", "allumer", "amateur",
    "ambivalence", "ample", "anecdote", "annonciation", "annulation", "anodin", "anthropologie", "appartement", "approbation", "aptitude",
    "arbitrage", "arbre", "argenterie", "arrêter", "artichaut", "assentiment", "attribut", "augmentation", "authentique", "avancement",
    "aventure", "banque", "banlieue", "barbecue", "basse", "bilan", "blague", "blessure", "blizzard", "boîte",
    "bonbon", "bond", "bourse", "brassard", "brûler", "café", "cagoule", "camarade", "campagne", "canne",
    "capacité", "carburant", "carte", "causalité", "cavité", "cerf", "chagrin", "champion", "chanson", "chant",
    "chapeau", "chiffon", "choix", "circuit", "citoyen", "civilisation", "claret", "climat", "clinique", "collaboration",
    "communauté", "comportement", "concorde", "connaissance", "conservateur", "convention", "convoquer", "coque", "coup", "cour",
    "couronne", "création", "critique", "croissance", "cuisine", "débat", "déclencheur", "défrayer", "définition", "délégation",
    "démarche", "démocratique", "départ", "dépôt", "dépresseur", "déroute", "détail", "détente", "développement", "difficulté",
    "diversité", "dix", "doigt", "dossier", "doubler", "drame", "économie", "écran", "éducation", "efficacité",
    "électoral", "éléphant", "élément", "élite", "employé", "enquête", "entrepreneur", "épaisseur", "espace", "esthétique",
    "étonnement", "étude", "évaluation", "examen", "exécutif", "exploitation", "extension", "faux", "femme", "ferme",
    "ferraille", "fiabilité", "fidelité", "fête", "fillette", "flotte", "flûte", "folklore", "foule", "fourchette",
    "franchise", "galerie", "garde", "générosité", "généralisation", "geste", "groupe", "habiller", "hémisphère", "honneur",
    "horloge", "humanitaire", "hygiène", "importance", "impulsion", "indépendance", "information", "ingénieur", "inondation", "instrument",
    "interaction", "intervention", "interview", "isoler", "jambe", "jouet", "journal", "journalisme", "juge", "justesse",
    "laïcité", "lavage", "lecture", "leçon", "liberté", "litige", "littérature", "logement", "loi", "manoeuvre",
    "marché", "marque", "matériel", "maître", "mécanisme", "mémoire", "métier", "moment", "monde", "montagne",
    "motivation", "mouvement", "nature", "négation", "négation", "négatif", "nourrir", "nouveau", "numérique", "obstacle",
    "observation", "obstination", "opportunité", "opinion", "oublier", "ouverture", "parole", "partenaire", "passage", "paysage",
    "pensée", "perception", "perception", "phénomène", "philosophie", "plaisir", "plan", "plaque", "poids", "poing",
    "politique", "position", "possibilité", "précision", "présentation", "problème", "proposition", "protection", "quand", "réalité",
    "réflexion", "régime", "réduction", "réponse", "réputation", "responsabilité", "restauration", "réveil", "réseau", "romantisme",
    "satisfaction", "semaine", "situation", "société", "sombre", "sourire", "spécial", "spécificité", "spectacle", "stabilité",
    "succès", "système", "tâche", "tableau", "talent", "technologie", "téléphone", "temps", "terme", "terrain",
    "théâtre", "tour", "trajectoire", "transformation", "tremblement", "trou", "valeur", "valise", "vantage", "vague",
    "vallée", "vanille", "vassal", "vigilance", "vision", "voisin", "voiture", "volonté", "volte", "zone",
    "abord", "abstrait", "accorder", "accuser", "achèvement", "acteur", "adoption", "affectif", "ajouter", "analogie",
    "animaux", "annoncer", "appartement", "appeler", "apprentissage", "arbre", "artiste", "assister", "aventure", "avantage",
    "banque", "banlieue", "baptême", "bavarder", "beau", "beaucoup", "bon", "bonheur", "boucle", "briser",
    "cabane", "calcul", "calendrier", "calmer", "campagne", "cancer", "chaîne", "chaleur", "champ", "chanson",
    "chaos", "chaud", "chiffre", "choc", "circuit", "citron", "claret", "cloche", "collectif", "colonisation",
    "collier", "commun", "compte", "concert", "conscience", "construire", "contexte", "convenance", "conversation", "croire",
    "culture", "cuisine", "cumul", "débat", "décider", "déclaration", "découvert", "défense", "défendre", "dégât",
    "démocratique", "démolition", "dépenses", "déplacement", "député", "désert", "dépôts", "déroulement", "détail", "détente",
    "développer", "difficulté", "distraction", "écran", "éducatif", "éligibilité", "émotion", "environnement", "envers", "espace",
    "étonnement", "examen", "exécuter", "expérience", "exploitation", "exposition", "exprimer", "femme", "fin", "flamme",
    "flore", "frappé", "fréquence", "frisson", "gagner", "garde", "gâteau", "génération", "grandeur", "grève",
    "grignoter", "groupe", "habitat", "histoire", "homme", "honneur", "humilité", "impact", "implication", "importance",
    "information", "inscription", "interruption", "interview", "isoler", "joueur", "juge", "justice", "libre", "loi",
    "magie", "maître", "mariage", "mécanique", "mélodie", "merveille", "monde", "mouvement", "nature", "naviguer",
    "observation", "offre", "opinion", "ordinaire", "ouverture", "parler", "passage", "patin", "pensée", "perception",
    "perte", "philosophie", "plage", "plante", "poids", "politique", "précision", "présentation", "problème", "proposition",
    "qualité", "quand", "quittance", "réaliser", "réalité", "réflexion", "réputation", "respect", "restauration", "satisfaction",
    "scène", "semaine", "situation", "société", "soupçon", "spécial", "spectateur", "spectacle", "structure", "succès",
    "surprise", "système", "tâche", "technique", "température", "temps", "terme", "terrain", "théâtre", "tradition",
    "travail", "trou", "type", "unique", "valeur", "vantage", "vendre", "vent", "vérification", "vision",
    "voix", "volonté", "voyage", "zéro", "abandon", "abominable", "abonnir", "acclamation", "accompagner", "adversaire", "aider", "aimant", "aimer",
    "alignement", "alimentation", "allié", "amplitude", "ancrage", "anticipation", "apprentissage", "approfondir", "approvisionner", "arbitre",
    "arrière", "articuler", "attacher", "attraction", "audace", "augmentation", "bâtir", "bâtisse", "bénéfice", "bonbon",
    "bourse", "boussole", "bruit", "cacher", "calque", "canevas", "capable", "capacité", "caractériser", "casse",
    "causer", "centre", "chiffon", "clarté", "clin", "clique", "collecter", "compétence", "concurrence", "connaissances",
    "conseil", "copain", "correspondre", "coûter", "coupable", "créer", "croissance", "cuisine", "cumul", "décider",
    "déclencheur", "délibération", "déterminé", "délivrer", "demander", "déménager", "déplacer", "dépôt", "dériver", "détendre",
    "développer", "difficulté", "diplomate", "distributeur", "dormir", "doubler", "éclaircir", "éclat", "écran", "énergie",
    "environnement", "état", "examen", "exécution", "exposer", "fête", "feuille", "fluctuer", "frapper", "gagner",
    "garde", "garer", "génération", "grandir", "gravitational", "guider", "harmonie", "histoire", "hommes", "idéal",
    "imagination", "impact", "impression", "individu", "informer", "inspirer", "interruption", "intervenir", "jardin", "jeu",
    "joli", "joli", "jouet", "législation", "liberté", "loi", "maturité", "mécanisme", "mode", "monde",
    "motivation", "nature", "naviguer", "nuance", "objectif", "occasion", "opportunité", "ordinaire", "paradigme", "partenaire",
    "passeport", "perception", "perspective", "philosopher", "plaisir", "politique", "préoccupation", "préparer", "préventif", "progrès",
    "proximité", "quitter", "rareté", "réaliser", "réchauffement", "réflexion", "réforme", "rester", "réussir", "savoir",
    "situation", "société", "sonner", "spectre", "spirituel", "stabilité", "stratégie", "succès", "technique", "témoigner",
    "terrains", "temps", "théorie", "travailler", "trouble", "unité", "unique", "valeur", "valoir", "vérifier",
    "voyage", "yoga"
];


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = Bienvenue : ${user.email};

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, totalPlayCountGame5: 0, highestScoreGame5: 0 });
                } else {
                    const userData = docSnap.data();
                    totalPlayCountGame5 = userData.totalPlayCountGame5 || 0;
                    highestScore = userData.highestScoreGame5 || 0;
                    playCount = totalPlayCountGame5 + 1;
                }
            } else {
                window.location.href = 'login.html';
            }
        });

        startBtn.addEventListener('click', async () => {
            typedWords = 0;
            scoreDisplay.innerText = Score actuel: ${typedWords};
            playCount = totalPlayCountGame5 + 1;
            wordInput.disabled = false;
            wordInput.focus();

            startGame();
        });

        function startGame() {
            startBtn.disabled = true;
            let timeLeft = 60;
            timerDisplay.innerText = Temps restant: ${timeLeft}s;

            displayNewWord();
            timerInterval = setInterval(() => {
                timeLeft -= 1;
                timerDisplay.innerText = Temps restant: ${timeLeft}s;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);

            totalPlayCountGame5 += 1;
            updateDoc(doc(db, 'users', userId), { totalPlayCountGame5 });
        }

        wordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && wordInput.value.trim().toLowerCase() === currentWord) {
                typedWords += 1;
                scoreDisplay.innerText = Score actuel: ${typedWords};
                displayNewWord();
                wordInput.value = '';
            }
        });

        function displayNewWord() {
            currentWord = wordList[Math.floor(Math.random() * frenchWords.length)];
            wordDisplay.innerText = currentWord;
        }

        async function endGame() {
            wordInput.disabled = true;
            startBtn.disabled = false;
            let finalScore = typedWords * 2;

            saveScore(finalScore);
        }

        async function saveScore(score) {
            try {
                const gameData = { score, playCount, timestamp: new Date() };
                await addDoc(collection(db, 'users', userId, 'Game5'), gameData);

                const userRef = doc(db, 'users', userId);
                if (totalPlayCountGame5 <= 4 && score > highestScore) {
                    highestScore = score;
                    await updateDoc(userRef, { highestScoreGame5: highestScore });
                }
            } catch (error) {
                console.error("Erreur en sauvegardant le score:", error);
            }
        }
    </script>
</body>
</html>
