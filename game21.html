
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C'est qui qui prend</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;  /* Added for scrolling if needed */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }


        
        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }
               /* Instructions section */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;  /* Added for scrolling if needed */
            max-height: 400px; /* Set a maximum height */

        }
                       .decoration {
    position: relative; /* Change to relative */
    display: flex; /* Use flexbox for centering */
    justify-content: center; /* Horizontally center */
    align-items: center; /* Vertically center */
    height: 100vh; /* Full viewport height to center */
    padding: 20px 0;
}

#santa {
    height: 400px;
    width: auto;
}
       
       
    </style>
</head>
<body>
    <h1>🐄C'est qui qui prend ?🐄</h1>
    <div id="instructions">
        <p>« Bien joué, félicitations ! » résonna la voix chaleureuse de la ceinture magique. « Votre voyage dans le passé est terminé. Vous avez appris à travailler ensemble et renforcé vos liens. Je vous renvoie maintenant dans le présent. Il vous reste quatre jours pour préparer les cadeaux. Mais comme vous êtes désormais une équipe UNIE et pas DESUNIE, je suis sûr que tout ira parfaitement bien. »</p>
<p>En un éclair, nos héros se retrouvèrent à nouveau dans l’atelier de Topapa. La lumière tamisée des guirlandes de Noël illuminait l’immense pièce, débordante de matériel : bois, tissus, engrenages, et un bric-à-brac indescriptible. Mais ce qui surprit tout le monde, c’était l’état de l’atelier. Les Bébés Romain avaient déjà pris les devants et avaient quasiment tout terminé !</p>
<p>« Regardez patron ! » s’exclamèrent les petits lutins en agitant une poupée devant Topapa. « On a fait une version améliorée ! »</p>
<p>Topapa inspecta l’objet : une poupée classique avec un bouton sur le ventre. « Améliorée ? » demanda-t-il, intrigué.</p>
<p>« Oui ! Avant, si tu appuyais sur le bouton, elle pleurait, c’était trop basique. Maintenant, on a ajouté du suspense. Quand tu appuies, ça lance un dé. »</p>
<p>Topapa fronça les sourcils. « Et ensuite ? »</p>
<p>« Bah, si ça fait 1, elle pleure. 2, elle rigole. 3, elle fait pipi. 4, elle éternue. 5, elle t’insulte. Et 6… » Le Bébé Romain fit un sourire malicieux. « Sa tête explose ! »</p>
<p>Avant que Topapa ne puisse réagir, le lutin appuya sur le bouton. Le dé roula lentement sur la table. Six. Une fraction de seconde plus tard, la tête de la poupée explosa en une pluie de polyester et de petits mécanismes volants.</p>
<p>Les autres lutins, figés, attendaient la réaction de Topapa. Celui-ci, les sourcils toujours froncés, essuya une fibre de polyester de son épaule. « Hmmm. Je pense que cette idée… pourrait être revisitée. »</p>
<p>Voyant l’air grave de Topapa, Bébé Romain comprit que son idée n’était pas la meilleure, mais sûr de son autre trouvaille, il dit : « Ok, vous voyez la bonne paie inversée, sacrée banger de votre part, une très bonne idée où vous avez su jouer avec les règles pour en faire un classique. Respects éternels Topapa. Et bien moi, à mon tour, j’ai eu une idée de génie, j’ai revisité le Gloomhaven. </p>
<p>Topapa se passa une main sur le visage. « Gloomhaven ? Le jeu de société avec les centaines de pièces et la complexité légendaire ? »</p>
<p>« Oui, mais c’est trop long et trop compliqué. Alors j’ai simplifié ! Maintenant, tu prends un dé. Si tu fais un chiffre plus grand que celui du monstre, tu gagnes. Et j’ai aussi redesigné la carte : elle est ronde et y a du soleil partout. Finies les aventures sombres et interminables. »</p>
<p>Un silence tomba dans l’atelier. Même RaseToiLaMoustache, pourtant friand d’idées absurdes, sembla désapprouver.</p>
<p>Sentant que l’ambiance devenait lourde et voulant éviter la daronnade qui s'approchait, les Bébés Romain décidèrent de ne pas parler de leur version raccourcie du Mille Bornes (« qui s’arrête à 100, sinon c’est trop long ») ni de leur Jeu des 1 Famille, « parce qu’une seule famille, c’est plus rapide. »</p>
<p>Fatigué, Topapa déambula dans l’atelier, espérant trouver un jeu à la hauteur. Ses yeux tombèrent sur une boîte familière, abandonnée sur une table : 6 qui prend. Il l’ouvrit, inspecta les cartes. Tout semblait parfait. Pas de modifications farfelues.</p>
<p>« Celui-là est impeccable. Bon travail. »</p>
<p>Les Bébés Romain hochèrent timidement la tête, mais Grinchémie, toujours sur le qui-vive, attrapa la règle du jeu et la feuilleta. Son visage se crispa.</p>
<p>« Non, » dit-elle lentement, levant les yeux vers Topapa. « Je crois qu’ils n’ont toujours pas compris. »</p>
<p>Explication du jeu : Non, je ne vais réexpliquer les règles du 6 qui prend pour les noobs. Tout ce que je dirais, c’est que votre score final sera multiplié par deux et ajouté à la base de données. 
</p>

         </div>
      <img id="santa" class="decoration" src="https://i.imgur.com/Eh2SUF2.png" alt="Santa Claus">
  
    <div id="highest-score">Meilleur score: 0</div>
     <div id="userStatus"></div>

   <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let userId = '';
        let highestScoreGame21 = 0

        const highestScoreDisplay = document.getElementById('highest-score');


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = `Bienvenue : ${user.email}`;

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, highestScoreGame21: 0, UserEmail: user.email });
                } else {
                    const userData = docSnap.data();
                    highestScoreGame21 = userData.highestScoreGame21 || 0;

                    UserEmail: user.email
                    
                    highestScoreDisplay.innerText = `Meilleur score: ${highestScoreGame21}`;
                    
                    
                }
            } else {
                window.location.href = 'login.html';
            }
        });

    </script>
</body>
</html>
