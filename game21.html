
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C'est qui qui prend</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;  /* Added for scrolling if needed */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }


        
        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }
               /* Instructions section */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;  /* Added for scrolling if needed */
            max-height: 400px; /* Set a maximum height */

        }
                       .decoration {
    position: relative; /* Change to relative */
    display: flex; /* Use flexbox for centering */
    justify-content: center; /* Horizontally center */
    align-items: center; /* Vertically center */
    height: 100vh; /* Full viewport height to center */
    padding: 20px 0;
}

#santa {
    height: 400px;
    width: auto;
}
       
       
    </style>
</head>
<body>
    <h1>ğŸ„C'est qui qui prend ?ğŸ„</h1>
    <div id="instructions">
        <p>Â« Bien jouÃ©, fÃ©licitations ! Â» rÃ©sonna la voix chaleureuse de la ceinture magique. Â« Votre voyage dans le passÃ© est terminÃ©. Vous avez appris Ã  travailler ensemble et renforcÃ© vos liens. Je vous renvoie maintenant dans le prÃ©sent. Il vous reste quatre jours pour prÃ©parer les cadeaux. Mais comme vous Ãªtes dÃ©sormais une Ã©quipe UNIE et pas DESUNIE, je suis sÃ»r que tout ira parfaitement bien. Â»</p>
<p>En un Ã©clair, nos hÃ©ros se retrouvÃ¨rent Ã  nouveau dans lâ€™atelier de Topapa. La lumiÃ¨re tamisÃ©e des guirlandes de NoÃ«l illuminait lâ€™immense piÃ¨ce, dÃ©bordante de matÃ©riel : bois, tissus, engrenages, et un bric-Ã -brac indescriptible. Mais ce qui surprit tout le monde, câ€™Ã©tait lâ€™Ã©tat de lâ€™atelier. Les BÃ©bÃ©s Romain avaient dÃ©jÃ  pris les devants et avaient quasiment tout terminÃ© !</p>
<p>Â« Regardez patron ! Â» sâ€™exclamÃ¨rent les petits lutins en agitant une poupÃ©e devant Topapa. Â« On a fait une version amÃ©liorÃ©e ! Â»</p>
<p>Topapa inspecta lâ€™objet : une poupÃ©e classique avec un bouton sur le ventre. Â« AmÃ©liorÃ©e ? Â» demanda-t-il, intriguÃ©.</p>
<p>Â« Oui ! Avant, si tu appuyais sur le bouton, elle pleurait, câ€™Ã©tait trop basique. Maintenant, on a ajoutÃ© du suspense. Quand tu appuies, Ã§a lance un dÃ©. Â»</p>
<p>Topapa fronÃ§a les sourcils. Â« Et ensuite ? Â»</p>
<p>Â« Bah, si Ã§a fait 1, elle pleure. 2, elle rigole. 3, elle fait pipi. 4, elle Ã©ternue. 5, elle tâ€™insulte. Et 6â€¦ Â» Le BÃ©bÃ© Romain fit un sourire malicieux. Â« Sa tÃªte explose ! Â»</p>
<p>Avant que Topapa ne puisse rÃ©agir, le lutin appuya sur le bouton. Le dÃ© roula lentement sur la table. Six. Une fraction de seconde plus tard, la tÃªte de la poupÃ©e explosa en une pluie de polyester et de petits mÃ©canismes volants.</p>
<p>Les autres lutins, figÃ©s, attendaient la rÃ©action de Topapa. Celui-ci, les sourcils toujours froncÃ©s, essuya une fibre de polyester de son Ã©paule. Â« Hmmm. Je pense que cette idÃ©eâ€¦ pourrait Ãªtre revisitÃ©e. Â»</p>
<p>Voyant lâ€™air grave de Topapa, BÃ©bÃ© Romain comprit que son idÃ©e nâ€™Ã©tait pas la meilleure, mais sÃ»r de son autre trouvaille, il dit : Â« Ok, vous voyez la bonne paie inversÃ©e, sacrÃ©e banger de votre part, une trÃ¨s bonne idÃ©e oÃ¹ vous avez su jouer avec les rÃ¨gles pour en faire un classique. Respects Ã©ternels Topapa. Et bien moi, Ã  mon tour, jâ€™ai eu une idÃ©e de gÃ©nie, jâ€™ai revisitÃ© le Gloomhaven. </p>
<p>Topapa se passa une main sur le visage. Â« Gloomhaven ? Le jeu de sociÃ©tÃ© avec les centaines de piÃ¨ces et la complexitÃ© lÃ©gendaire ? Â»</p>
<p>Â« Oui, mais câ€™est trop long et trop compliquÃ©. Alors jâ€™ai simplifiÃ© ! Maintenant, tu prends un dÃ©. Si tu fais un chiffre plus grand que celui du monstre, tu gagnes. Et jâ€™ai aussi redesignÃ© la carte : elle est ronde et y a du soleil partout. Finies les aventures sombres et interminables. Â»</p>
<p>Un silence tomba dans lâ€™atelier. MÃªme RaseToiLaMoustache, pourtant friand dâ€™idÃ©es absurdes, sembla dÃ©sapprouver.</p>
<p>Sentant que lâ€™ambiance devenait lourde et voulant Ã©viter la daronnade qui s'approchait, les BÃ©bÃ©s Romain dÃ©cidÃ¨rent de ne pas parler de leur version raccourcie du Mille Bornes (Â« qui sâ€™arrÃªte Ã  100, sinon câ€™est trop long Â») ni de leur Jeu des 1 Famille, Â« parce quâ€™une seule famille, câ€™est plus rapide. Â»</p>
<p>FatiguÃ©, Topapa dÃ©ambula dans lâ€™atelier, espÃ©rant trouver un jeu Ã  la hauteur. Ses yeux tombÃ¨rent sur une boÃ®te familiÃ¨re, abandonnÃ©e sur une table : 6 qui prend. Il lâ€™ouvrit, inspecta les cartes. Tout semblait parfait. Pas de modifications farfelues.</p>
<p>Â« Celui-lÃ  est impeccable. Bon travail. Â»</p>
<p>Les BÃ©bÃ©s Romain hochÃ¨rent timidement la tÃªte, mais GrinchÃ©mie, toujours sur le qui-vive, attrapa la rÃ¨gle du jeu et la feuilleta. Son visage se crispa.</p>
<p>Â« Non, Â» dit-elle lentement, levant les yeux vers Topapa. Â« Je crois quâ€™ils nâ€™ont toujours pas compris. Â»</p>
<p>Explication du jeu : Non, je ne vais rÃ©expliquer les rÃ¨gles du 6 qui prend pour les noobs. Tout ce que je dirais, câ€™est que votre score final sera multipliÃ© par deux et ajoutÃ© Ã  la base de donnÃ©es. 
</p>

         </div>
      <img id="santa" class="decoration" src="https://i.imgur.com/Eh2SUF2.png" alt="Santa Claus">
  
    <div id="highest-score">Meilleur score: 0</div>
     <div id="userStatus"></div>

   <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let userId = '';
        let highestScoreGame21 = 0

        const highestScoreDisplay = document.getElementById('highest-score');


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = `Bienvenue : ${user.email}`;

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, highestScoreGame21: 0, UserEmail: user.email });
                } else {
                    const userData = docSnap.data();
                    highestScoreGame21 = userData.highestScoreGame21 || 0;

                    UserEmail: user.email
                    
                    highestScoreDisplay.innerText = `Meilleur score: ${highestScoreGame21}`;
                    
                    
                }
            } else {
                window.location.href = 'login.html';
            }
        });

    </script>
</body>
</html>
