<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LES COMPTES SONT PAS BONS KEVIN - Jeu 10 ðŸ˜Š</title>
    <style>
        /* General body styling */
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;
        }

        /* Title styling */
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #1b5e20;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }

        /* Instructions */
        #instructions {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            max-width: 1000px;
            text-align: center;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto; 
            max-height: 400px;
        }

        /* Game Area */
        #gameArea {
            position: relative;
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            border: 2px solid #b71c1c;
            border-radius: 12px;
            text-align: center;
            font-size: 1.5em;
            color: #333;
            padding: 20px;
        }

        /* Score */
        #score, #roundScore, #roundNumber, #lettersDisplay {
            font-size: 1.2em;
            margin: 10px 0;
        }

        /* Start Button */
        #start-btn {
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            background-color: #388e3c;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #start-btn:hover {
            background-color: #2e7d32;
        }

        /* Input area for the user */
        #wordInput {
            padding: 8px;
            font-size: 1em;
            width: 80%;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        #submitWord {
            padding: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-left: 5px;
            background-color: #388e3c;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #submitWord:hover {
            background-color: #2e7d32;
        }
       /* Timer display */
        #timer {
            font-size: 1.5em;
            margin-top: 20px;
            color: #1b5e20;
        }
        
        /* Feedback message */
        #feedback {
            font-size: 1.2em;
            color: #d32f2f;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>LES COMPTES SONT PAS BONS KEVIN - Jeu 10 ðŸ˜Š</h1>

    <!-- Instructions -->
    <div id="instructions">
        <p>Le but de ce jeu est d'Ã©crire des mots Ã  partir de lettres donnÃ©es.</p>
        <p>Vous avez 8 tours pour Ã©crire des mots en utilisant uniquement les lettres affichÃ©es.</p>
        <p>Chaque mot correct augmente votre score en fonction de son nombre de lettres.</p>
        <p>Si vous tapez un mot plus long que le prÃ©cÃ©dent, votre score augmentera!</p>
        <p>Vous avez 2 minutes pour chaque tour. Bonne chance!</p>
    </div>

    <div id="userStatus"></div>
    <div id="score">Score total: 0</div>
    <div id="roundScore">Score du tour: 0</div>
    <div id="roundNumber">Tour: 1/8</div>
    <div id="timer">Temps restant: 120s</div>
    <button id="start-btn">Commencer le jeu</button>

    <div id="gameArea">
        <div id="lettersDisplay">Lettres: </div>
        <input type="text" id="wordInput" placeholder="Entrez un mot" />
        <button id="submitWord">Valider</button>
        <div id="feedback"></div> <!-- Feedback message display -->
    </div>

    <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let userId = '';
        let totalScore = 0;
        let roundScore = 0;
        let totalPlayCountGame10 = 0;
        let highestScore = 0;
        let totalPlayCount = 0;
        let round = 0;
        let letters = [];
        let roundWords = [];
        let gameTime = 5;  // 2 minutes per round
        let timerInterval;

        const userStatus = document.getElementById('userStatus');
        const scoreDisplay = document.getElementById('score');
        const roundScoreDisplay = document.getElementById('roundScore');
        const roundNumberDisplay = document.getElementById('roundNumber');
        const lettersDisplay = document.getElementById('lettersDisplay');
        const startButton = document.getElementById('start-btn');
        const wordInput = document.getElementById('wordInput');
        const submitWord = document.getElementById('submitWord');
        const feedbackDisplay = document.getElementById('feedback');
        const timerDisplay = document.getElementById('timer');

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId, totalPlayCountGame10: 0, highestScoreGame10: 0 });
                } else {
                    const userData = docSnap.data();
                    totalPlayCountGame10 = userData.totalPlayCountGame10 || 0;
                    highestScore = userData.highestScoreGame10 || 0;
                }
            } else {
                window.location.href = 'login.html';
            }
        });

        function startGame() {
            totalScore = 0;
            round = 1;
            roundScore = 0;
            scoreDisplay.innerText = `Score total: ${totalScore}`;
            roundScoreDisplay.innerText = `Score du tour: ${roundScore}`;
            roundNumberDisplay.innerText = `Tour: ${round}/8`;
            startButton.style.display = 'none';

            nextRound();
        }

        function nextRound() {
            if (round > 8) {
                saveScore();
                alert(`Jeu terminÃ©! Votre score final est ${totalScore}`);
                startButton.style.display = 'block';
                return;
            }

            roundScore = 0;
            roundScoreDisplay.innerText = `Score du tour: ${roundScore}`;
            roundNumberDisplay.innerText = `Tour: ${round}/8`;

            letters = generateLetters();
            roundWords = generateWordsForRound(round);

            lettersDisplay.innerText = `Lettres: ${letters.join(', ')}`;
            gameTime = 5;
            timerDisplay.innerText = `Temps restant: ${gameTime}s`;

            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                gameTime--;
                timerDisplay.innerText = `Temps restant: ${gameTime}s`;
                if (gameTime <= 0) {
                    clearInterval(timerInterval);
                    round++;
                    nextRound();
                }
            }, 1000);
        }

        function generateLetters() {
            const letterSets = {
                1: ['A', 'D', 'E', 'T', 'I', 'P', 'F', 'M', 'A', 'B'],
                2: ['Z', 'Q', 'J', 'I', 'O', 'U', 'P', 'N', 'E', 'A'],
                3: ['B', 'I', 'O', 'P', 'M', 'D', 'F', 'A', 'U', 'V'],
                4: ['G', 'E', 'J', 'M', 'P', 'I', 'A', 'O', 'H', 'U'],
                5: ['O', 'N', 'P', 'A', 'E', 'V', 'B', 'N', 'R', 'I'],
                6: ['X', 'J', 'W', 'Z', 'Y', 'U', 'O', 'R', 'E', 'V'],
                7: ['P', 'O', 'U', 'L', 'A', 'Q', 'S', 'N', 'M', 'E'],
                8: ['R', 'O', 'M', 'A', 'N', 'I', 'C', 'H', 'E', 'L']
            };




            return letterSets[round] || [];
        }

        function generateWordsForRound(round) {
            const wordLists = {
                1: [
    'DEPAMAIT', 'MADEFIAT', 'ABADITE', 'ADAMITE', 'ADAPTIF', 'BEAMAIT', 'DEBATAI', 'DEBIPAT', 'DEMATAI', 'DEPAMAI', 
    'DEPAMAT', 'DETAMAI', 'DETAPAI', 'DIABATE', 'EMBATAI', 'EMPATAI', 'ETAMPAI', 'MADEFIA', 'PIATEDA', 'ABADIE', 
    'ABIMAT', 'ADAPTE', 'ADEFIP', 'AFABET', 'AMATIE', 'AMBITE', 'BADAIT', 'BADAME', 'BATIDA', 'BEAMAI', 'BEAMAT', 
    'BEDAIT', 'BITMAP', 'DABEMA', 'DAMAIT', 'DEAMIA', 'DEBATA', 'DEBATI', 'DEBIPA', 'DEBITA', 'DEFAIT', 'DEFIAT', 
    'DEMATA', 'DEMITA', 'DEPAMA', 'DEPITA', 'DETAMA', 'DETAPA', 'EBITDA', 'EMBATA', 'EMPADA', 'EMPATA', 'EPATAI', 
    'ETAMAI', 'ETAMPA', 'FAAITE', 'FADAIT', 'FAIMBE', 'FATIMA', 'FETIDA', 'MADITE', 'MATADI', 'MEDIAT', 'MEDITA', 
    'MEFAIT', 'MEFIAT', 'PADEMA', 'PAMAIT', 'PFTEDA', 'TABIDE', 'TAMPAI', 'TEMPIA', 'ABADE', 'ABADI', 'ABAIE', 'ABAIT', 
    'ABATE', 'ABDIE', 'ABETI', 'ABIMA', 'ABIME', 'ADMET', 'ADMIT', 'AFADE', 'AIDAT', 'AIETA', 'AIMAT', 'AMADE', 'AMAPE', 
    'AMATE', 'AMATI', 'AMBAI', 'AMIBE', 'AMIDE', 'APATE', 'APIDE', 'APITA', 'APITE', 'ATABI', 'ATAPI', 'ATEMI', 'ATIPA', 
    'BADAI', 'BADAT', 'BADEM', 'BADIA', 'BAFIA', 'BAITE', 'BAPTE', 'BATAI', 'BATAM', 'BATEA', 'BATIE', 'BEAIT', 'BEAMA', 
    'BEDAI', 'BEDAT', 'BEDIA', 'BEFTI', 'BIDAT', 'BIDET', 'BIPAT', 'BITDE', 'DABAI', 'DABAT', 'DAIAT', 'DAMAI', 'DAMAT', 
    'DAMBA', 'DAMBE', 'DAMET', 'DAMIA', 'DAMIE', 'DATAI', 'DATIF', 'DBEAT', 'DEBAT', 'DEBIT', 'DEFIA', 'DEFIT', 'DEMBA', 
    'DEMIT', 'DEPIT', 'DIMAT', 'DMTAP', 'EBADI', 'EDITA', 'EMBAT', 'EMBID', 'EMIAT', 'EPATA', 'EPIAT', 'ETAIM', 'ETAMA', 
    'FADAI', 'FADAT', 'FADET', 'FAIDA', 'FAIDE', 'FAITE', 'FATIM', 'FATMA', 'FEAIT', 'FETAI', 'FIATA', 'IAMBE', 'IDEAT', 
    'IPADE', 'MADIA', 'MAFIA', 'MAIDA', 'MAITE', 'MATAF', 'MATAI', 'MATIE', 'MATIF', 'MEDIA', 'MEDIT', 'MEFIA', 'MEFIT', 
    'MPADE', 'PAITA', 'PAMAI', 'PAMAT', 'PAMET', 'PATAI', 'PATIA', 'PEMBA', 'PETAF', 'PETAI', 'PIAAM', 'PIADE', 'PIDAT', 
    'PIETA', 'PIFAT', 'TADAM', 'TAFIA', 'TAIEB', 'TAIFA', 'TAIPA', 'TAMAI', 'TAMBA', 'TAMIA', 'TAMIE', 'TAMPA', 'TAMPE', 
    'TAPAI', 'TAPIA', 'TAPIE', 'TEMIA', 'TEMPI', 'TIAPA', 'TIAPE', 'TIBMA', 'TIMBA', 'TIMBE', 'TIMPE', 'ABAD', 'ABAI', 
    'ABAT', 'ABDI', 'ABED', 'ABET', 'ABID', 'ABIT', 'ADAB', 'ADAI', 'ADAM', 'ADAT', 'ADEM', 'ADET', 'ADFA', 'AFAB', 'AFAT', 
    'AFET', 'AFPA', 'AIDA', 'AIDE', 'AIEA', 'AIMA', 'AIME', 'AITA', 'AMAB', 'AMAP', 'AMAT', 'AMBA', 'AMBE', 'AMBI', 'AMDE', 
    'AMIE', 'AMPA', 'APBT', 'APIA', 'APMA', 'APTE', 'ATEA', 'BADA', 'BADE', 'BAFA', 'BAIE', 'BAMA', 'BAME', 'BAMI', 'BAPE', 
    'BAPT', 'BATA', 'BATE', 'BATI', 'BEAI', 'BEAM', 'BEAT', 'BEDA', 'BEMA', 'BEPF', 'BETA', 'BETI', 'BIDA', 'BIDE', 'BIEF', 
    'BIET', 'BIMA', 'BIME', 'BIPA', 'BIPE', 'BIPM', 'BITA', 'BITE', 'DABA', 'DABE', 'DABI', 'DAIA', 'DAIE', 'DAIM', 'DAMA', 
    'DAME', 'DAMP', 'DAPA', 'DATA', 'DATE', 'DATI', 'DEAP', 'DEBA', 'DEFI', 'DEIA', 'DEMI', 'DEPT', 'DETA', 'DIAB', 'DIAM', 
    'DIEF', 'DIMA', 'DIME', 'DIPE', 'DITA', 'DITE', 'DPTM', 'DTMF', 'EBAT', 'EBIT', 'EDAM', 'EDIT', 'EDPM', 'EMBD', 'EMIA', 
    'EMIT', 'EPDM', 'EPIA', 'EPIT', 'ETAI', 'ETAM', 'FADA', 'FADE', 'FAID', 'FAIM', 'FAIT', 'FAME', 'FATE', 'FEAI', 'FEAT', 
    'FEDI', 'FEMA', 'FEMI', 'FETA', 'FIAT', 'FIEP', 'FITA', 'FTAM', 'IADE', 'IDEA', 'IDEM', 'IDFM', 'IEDA', 'IFAB', 'IFAP', 
    'IFTA', 'IMAD', 'IMAP', 'IMPE', 'IPAD', 'ITAM', 'ITEA', 'ITEM', 'ITEP', 'MAAF', 'MAAT', 'MABA', 'MABE', 'MABI', 'MADA', 
    'MADE', 'MADI', 'MAFA', 'MAFE', 'MAIA', 'MAID', 'MAIE', 'MAIF', 'MAIT', 'MAPI', 'MATA', 'MATE', 'MATI', 'MBIT', 'MBTI', 
    'MEAD', 'MEAT', 'MEDA', 'META', 'MIDP', 'MIFA', 'MITA', 'MITE', 'MTEP', 'PAEA', 'PAIE', 'PAIT', 'PAMA', 'PAME', 'PATA', 
    'PATE', 'PATI', 'PBDE', 'PBIT', 'PDMA', 'PEDF', 'PEIA', 'PETA', 'PFBA', 'PFDA', 'PIAF', 'PIAT', 'PIDA', 'PIDE', 'PIEA', 
    'PIED', 'PIEM', 'PIET', 'PIFA', 'PIFE', 'PITA', 'PITE', 'TAAF', 'TABA', 'TABI', 'TADA', 'TADE', 'TAFI', 'TAIE', 'TAIF', 
    'TAMA', 'TAME', 'TAMI', 'TAPA', 'TAPE', 'TAPI', 'TDPM', 'TEAM', 'TEBA', 'TEDA', 'TEIA', 'TEMA', 'TEMP', 'TFAI', 'TIBE', 
    'TIEP', 'TIFE', 'TIMA', 'TIME', 'TIMP', 'TIPA', 'TIPE', 'AAB', 'AAD', 'AAE', 'AAF', 'AAI', 'AAM', 'AAP', 'AAT', 'ABA', 
    'ABD', 'ABE', 'ABF', 'ABI', 'ABM', 'ABP', 'ABT', 'ADA', 'ADE', 'ADF', 'ADI', 'ADM', 'ADP', 'ADT', 'AEB', 'AED', 'AEF', 
    'AEM', 'AFA', 'AFB', 'AFI', 'AFP', 'AFT', 'AIA', 'AIB', 'AID', 'AIE', 'AIF', 'AIM', 'AIT', 'AMA', 'AMB', 'AMD', 'AME', 
    'AMF', 'AMI', 'AMP', 'AMT', 'APA', 'APB', 'APD', 'APE', 'APF', 'API', 'APM', 'APT', 'ATA', 'ATB', 'ATD', 'ATE', 'ATF', 
    'ATI', 'ATM', 'ATP', 'BAA', 'BAD', 'BAE', 'BAF', 'BAI', 'BAM', 'BAP', 'BAT', 'BDA', 'BDE', 'BDI', 'BDM', 'BDP', 'BDT', 
    'BEA', 'BED', 'BEF', 'BEI', 'BEM', 'BEP', 'BET', 'BFA', 'BFD', 'BFI', 'BFM', 'BFT', 'BIA', 'BIE', 'BIF', 'BIM', 'BIP', 
    'BIT', 'BMD', 'BMP', 'BPA', 'BPF', 'BPI', 'BPM', 'BTE', 'BTM', 'BTP', 'DAA', 'DAB', 'DAE', 'DAF', 'DAI', 'DAM', 'DAP', 
    'DAT', 'DBA', 'DBM', 'DBP', 'DEA', 'DEB', 'DEF', 'DEI', 'DEM', 'DEP', 'DFA', 'DFI', 'DIA', 'DIE', 'DIF', 'DIM', 'DIP', 
    'DIT', 'DMA', 'DMB', 'DME', 'DMT', 'DPA', 'DPE', 'DPI', 'DPT', 'DTA', 'EAD', 'EAI', 'EAM', 'EAP', 'EAT', 'EBM', 'EDA', 
    'EDF', 'EDI', 'EDM', 'EDP', 'EDT', 'EFA', 'EFI', 'EFM', 'EIA', 'EIB', 'EIP', 'EMA', 'EMB', 'EMI', 'EMP', 'EMT', 'EPA', 
    'EPF', 'EPI', 'EPM', 'ETA', 'ETB', 'ETF', 'ETI', 'ETP', 'FAA', 'FAB', 'FAD', 'FAE', 'FAI', 'FAM', 'FAP', 'FAT', 'FBD', 
    'FBI', 'FDM', 'FDP', 'FEA', 'FEB', 'FED', 'FEM', 'FEP', 'FET', 'FIA', 'FIB', 'FIE', 'FIM', 'FIP', 'FIT', 'FMI', 'FPA', 
    'FPE', 'FPM', 'FPT', 'FTM', 'FTP', 'IAA', 'IAE', 'IAM', 'IAT', 'IBA', 'IBE', 'IBM', 'IDA', 'IDB', 'IDE', 'IDM', 'IED', 
    'IEF', 'IEM', 'IEP', 'IFA', 'IMA', 'IME', 'IMP', 'IPA', 'IPE', 'IPM', 'ITA', 'ITE', 'MAA', 'MAB', 'MAD', 'MAE', 'MAF', 
    'MAI', 'MAP', 'MAT', 'MBA', 'MBD', 'MBI', 'MDA', 'MDB', 'MDE', 'MDF', 'MDI', 'MDP', 'MDT', 'MEA', 'MEB', 'MED', 'MEF', 
    'MEI', 'MEP', 'MET', 'MFA', 'MFE', 'MIA', 'MIB', 'MID', 'MIE', 'MIF', 'MIP', 'MIT', 'MPA', 'MPB', 'MPD', 'MPI', 'MPT', 
    'MTA', 'MTB', 'MTD', 'MTF', 'MTI', 'MTP', 'PAA', 'PAB', 'PAD', 'PAE', 'PAF', 'PAI', 'PAM', 'PAT', 'PBT', 'PDA', 'PDF', 
    'PDT', 'PEA', 'PEB', 'PED', 'PEF', 'PEI', 'PEM', 'PET', 'PFA', 'PFE', 'PFT', 'PIA', 'PIB', 'PID', 'PIE', 'PIF', 'PIT', 
    'PMA', 'PMB', 'PME', 'PMI', 'PMT', 'PTE', 'PTI', 'PTM', 'TAA', 'TAB', 'TAD', 'TAE', 'TAF', 'TAI', 'TAM', 'TAP', 'TBA', 
    'TBF', 'TBI', 'TBM', 'TDB', 'TDM', 'TEA', 'TED', 'TEF', 'TEI', 'TEM', 'TEP', 'TIA', 'TIB', 'TID', 'TIE', 'TIF', 'TIM', 
    'TIP', 'TMA', 'TME', 'TMF', 'TMP', 'TPA', 'TPB', 'TPE', 'TPI', 'TPM', 'AA', 'AB', 'AD', 'AE', 'AF', 'AI', 'AM', 'AP', 
    'AT', 'BA', 'BD', 'BE', 'BF', 'BI', 'BM', 'BP', 'BT', 'DA', 'DB', 'DE', 'DF', 'DI', 'DM', 'DP', 'DT', 'EA', 'EB', 'ED', 
    'EF', 'EI', 'EM', 'EP', 'ET', 'FA', 'FB', 'FD', 'FE', 'FI', 'FM', 'FP', 'FT', 'IA', 'ID', 'IE', 'IF', 'IM', 'IP', 'IT', 
    'MA', 'MB', 'MD', 'ME', 'MF', 'MI', 'MP', 'MT', 'PA', 'PB', 'PD', 'PE', 'PF', 'PI', 'PM', 'PT', 'TA', 'TB', 'TD', 'TE', 
    'TF', 'TI', 'TM', 'TP', 'A', 'B', 'D', 'E', 'F', 'I', 'M', 'P'
]
,
                2: ['MAP', 'NAP', 'TONE', 'STONE', 'APPLE'],
                3: ['PEAR', 'CAT', 'POT', 'TOP', 'POTATO'],
                4: ['CAT', 'BAT', 'TIGER', 'COW', 'EAR'],
                5: ['MAP', 'NAP', 'TONE', 'STONE', 'APPLE'],
                6: ['PEAR', 'CAT', 'POT', 'TOP', 'POTATO'],
                7: ['PEAR', 'CAT', 'POT', 'TOP', 'POTATO'],
                8: ['CAT', 'BAT', 'TIGER', 'COW', 'EAR'],
                9: ['MAP', 'NAP', 'TONE', 'STONE', 'APPLE'],
                10: ['PEAR', 'CAT', 'POT', 'TOP', 'POTATO'],
            };
            Object.keys(wordLists).forEach(round => {
            console.log(`Round ${round} has ${wordLists[round].length} terms.`);
        });

            return wordLists[round] || [];
        }

        function handleSubmitWord() {
            const userWord = wordInput.value.toUpperCase().trim();
            if (!userWord) return;
                if (userWord === "ROMANICHEL") {
        feedbackDisplay.innerText = 'Mot interdit';
        wordInput.value = ''; // Clear input field
        return;
    }
        
            wordInput.value = '';
        
            if (roundWords.includes(userWord)) {
                const wordLength = userWord.length;
        
                if (wordLength > roundScore) {
                    totalScore += wordLength - roundScore; // Add the difference (if any) to totalScore
                    roundScore = wordLength;  // Update the round score to the length of the longest word found
        
                    scoreDisplay.innerText = `Score total: ${totalScore}`;
                    roundScoreDisplay.innerText = `Score du tour: ${roundScore}`;
                }
                feedbackDisplay.innerText = 'Mot existant';
            } else {
                feedbackDisplay.innerText = 'Mot inexistant';
            }
        }

        async function saveScore(currentScore) {
            try {
                const gameData = { score: totalScore, timestamp: new Date() };
                await addDoc(collection(db, 'users', userId, 'Game10'), gameData);
                const userRef = doc(db, 'users', userId);
                
            totalPlayCountGame10 += 1;
            await updateDoc(userRef, { totalPlayCountGame10 });
                
                if (totalPlayCountGame10 < 2 && totalScore > highestScore) {
                   highestScore = totalScore;
                    await updateDoc(doc(db, 'users', userId), { highestScoreGame10: highestScore });
                }

            } catch (error) {
                console.error("Erreur en sauvegardant le score:", error);
            }
        }

        submitWord.addEventListener('click', handleSubmitWord);
        startButton.addEventListener('click', startGame);
        
    </script>
</body>
</html>
