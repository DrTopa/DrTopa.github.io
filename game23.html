
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run Chicken</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;  /* Added for scrolling if needed */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }


        
        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }
               /* Instructions section */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;  /* Added for scrolling if needed */
            max-height: 400px; /* Set a maximum height */

        }
       
       
    </style>
</head>
<body>
    <h1>🐔Run Chicken🐔</h1>
    <div id="instructions">
        <p>00h00. Bébé Romain ouvrit les yeux dans la nuit, pris d’une envie pressante. En sortant de sa chambre pour se rendre aux toilettes, il aperçut une lumière diffuse filtrant par l’entrebâillement d’une porte. Intrigué et un peu inquiet, il s’en approcha discrètement. Il découvrit alors Topapa, absorbé par son téléphone, le visage éclairé par l’écran tandis qu’il prenait des selfies Duckface. « Oh le boomer ! » lança Bébé Romain, hilare. Pris de court, Topapa leva les yeux, visiblement agacé. « Qu’est-ce que tu fais là, toi ? » grogna-t-il. « Je regarde les dernières news sur Foot Mercato et la Provence askip Drogba revient à l’OM cette année. C’est LA bonne ! ». </p>
 <p>Soudain, le téléphone retentit, brisant le silence de la nuit et faisant sursauter les deux camarades. Bébé Romain et Topapa échangèrent un regard inquiet.</p>
 <p>— "Qui peut bien appeler à une heure pareille ?" murmura Bébé Romain, une pointe d'appréhension dans la voix. "Vas-y, toi, réponds," </p>
 <p>Topapa soupira, attrapa le téléphone d’un geste prudent, et décrocha.</p>
 <p>— "Allô ?" dit-il, hésitant, son regard fixant celui de Bébé Romain. Pas de réponse.</p>
 <p>— "Allô ?" insista-t-il, un peu plus fort cette fois.</p>
 <p>Une voix monocorde et mécanique finit par répondre :</p>
 <p>— "Bonsoir Monsieur, je vous appelle concernant la rénovation énergétique des bâtiments. Saviez-vous que vous pouviez bénéficier de... ?"</p>
 <p>Mais la phrase fut brutalement interrompue. D’un geste agacé, Topapa raccrocha le téléphone avec un soupir exaspéré.</p>
 <p>— "Alors, c’était qui ?" demanda Bébé Romain, les yeux ronds.</p>
 <p>Topapa haussa les épaules avec un sourire crispé :</p>
 <p>— "De la pub. “</p>
 <p>Leur conversation, pourtant à voix basse, finit par réveiller Grinchémie. Celle-ci apparut dans l’encadrement de la porte, un paquet de gâteaux à la main, visiblement contrariée. « Vous m’avez réveillée, bande de débiles ! » râla-t-elle, la bouche à moitié pleine. Surpris, Topapa et Bébé Romain se tournèrent vers elle en sursaut. « Oh, tu nous as fait flipper ! » s’exclama Topapa. Grinchémie les toisa avec un sourire moqueur. « Quels pleutres, vous voulez un coussin de la peur ou quoi ? » lança-t-elle en mordant dans un second gâteau.</p>
 <p>Mais Topapa pointa alors son doigt accusateur. « Ah ! Donc c’est toi qui as mangé tous les gâteaux ! » Grinchémie, indignée, répliqua aussitôt : « N’importe quoi, c’est toi, et en plus tu fous les emballages dans ma poubelle. » Elle mâchait avec exagération pour bien marquer son territoire. « De toute façon, tant que personne ne touche à mes génoises, ça me va. » nota Bébé Romain</p>
 <p>À peine avait-elle prononcé ces mots qu’un petit rire discret se fit entendre. Tout le monde se figea et tourna la tête vers la porte entrouverte. Grinchémie avança prudemment, et se jeta sur l’inconnu. « Oh putaaiiin RaseToiLaMoustache, Scuse moi pour la réaction RaseToiLaMoustache ! » Le renne était là, un air penaud sur le visage, tenant la Switch dans ses sabots. Il semblait concentré, probablement en pleine tentative de dépasser les 700 heures sur Smash Bros. Grinchémie leva les yeux au ciel. « Et après, on dit que je geeke trop sur Stardew Valley... » </p>
 <p>Bébé Romain regarda la scène en riant. « Il ne manque plus que Dudley, et c’est la fiesta au complet. » À peine ces mots prononcés, un fracas se fit entendre dans l’escalier. Dudley dévalait les marches à toute vitesse, propulsant Topapa hors des toilettes. « Chacun pour soi, bande de noobs ! » cria-t-il en refermant brutalement la porte. Restés en bas, les autres se regardèrent en silence. « Il a dû croiser un coelacanthe, » supposa Topapa. « Ou une araignée, » ajouta Bébé Romain. Grinchémie, moqueuse, haussa les épaules. « Non, sûrement son ombre. »</p>
 <p>Soudain, un cri étouffé se fit entendre derrière la porte fermée. « Bande de noeils, y a un fantôme ! » hurla Dudley. Topapa éclata de rire. « Le fantôme de McGregor, peut-être ? » plaisanta-t-il. Mais avant que quiconque ne puisse répondre, un murmure glacial résonna dans la pièce. Une voix douce mais effrayante siffla à l’oreille de Topapa : « Non, moi, c’est Mmmmmhugo... ».</p>
 <p>Explication du jeu : Petit Mhugo des familles. Votre score final est multiplié par deux et soustrait à 100 pour avoir votre « High score de la game 23 ». 
</p>
         </div>
  
    <div id="highest-score">Meilleur score: 0</div>
     <div id="userStatus"></div>

   <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let userId = '';
        let highestScoreGame23 = 0

        const highestScoreDisplay = document.getElementById('highest-score');


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = `Bienvenue : ${user.email}`;

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, highestScoreGame23: 0, UserEmail: user.email });
                } else {
                    const userData = docSnap.data();
                    highestScoreGame23 = userData.highestScoreGame23 || 0;

                    UserEmail: user.email
                    
                    highestScoreDisplay.innerText = `Meilleur score: ${highestScoreGame23}`;
                    
                    
                }
            } else {
                window.location.href = 'login.html';
            }
        });

    </script>
</body>
</html>
