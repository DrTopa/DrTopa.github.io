<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: pink;
            color: white;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        .game-area {
            padding: 20px;
        }
        .input-group {
            margin: 10px;
        }
        button {
            background-color: white;
            color: pink;
            padding: 10px 20px;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: lightgray;
        }
        #gameCanvas {
            margin-top: 20px;
            border: 2px solid white;
            position: relative;
            width: 100%;
            height: 100px;
        }
        #ball {
            position: absolute;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
        }
        #flag {
            position: absolute;
            top: 0;
            width: 5px;
            height: 30px;
            background-color: black;
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-area">
        <h1>Golf Game</h1>
        <p>Try to get the ball into the hole!</p>
        <p id="windMessage"></p>
        <div class="input-group">
            <label for="speed">Initial Speed (1-10): </label>
            <input type="number" id="speed" min="1" max="10" />
        </div>
        <div class="input-group">
            <label for="angle">Angle (degrees): </label>
            <input type="number" id="angle" min="-90" max="90" />
        </div>
        <div class="input-group">
            <label for="club">Choose Golf Club: </label>
            <select id="club">
                <option value="1">Putter</option>
                <option value="2">Wedge</option>
                <option value="3">Iron 1</option>
                <option value="4">Iron 2</option>
                <option value="5">Driver</option>
            </select>
        </div>
        <div>
            <button onclick="playRound()">Shoot!</button>
            <button onclick="nextHole()" id="nextButton" style="display: none;">Next Hole</button>
        </div>
        <p id="shootCount"></p>
        <p id="totalShootCount"></p>
        <p id="message"></p>

        <div id="gameCanvas">
            <div id="ball"></div>
            <div id="flag"></div>
        </div>
    </div>

    <script>
        const holes = [200, 300, 400, 500, 1000]; // Distances of the holes (meters)
        let currentRound = 0;
        let wind = Math.random() * 20 - 10; // Random wind factor between -10 and 10
        let currentPosition = 0; // Tracks the ball's current position
        let shootCounter = 0; // Counts the number of times the user presses "Shoot" in the current round
        let totalShots = 0; // Cumulative count of shots taken across all rounds

        const canvas = document.getElementById("gameCanvas");
        const holePosition = (holes[currentRound] / 1500) * canvas.offsetWidth; // Convert hole position to pixels

        // Function to update and display round details and wind
        function updateRoundDetails() {
            const roundDistance = holes[currentRound];
            document.getElementById("windMessage").innerText = `Current Wind: ${wind.toFixed(1)} m/s | Round ${currentRound + 1}/5: Distance ${roundDistance}m`;
        }

        // Display the initial wind and round details
        updateRoundDetails();

        // Initialize the game area with a line of 1500 meters (scaled to canvas width)
        function drawCourseLine() {
            const courseLine = document.createElement('div');
            courseLine.style.position = 'absolute';
            courseLine.style.top = '50%';
            courseLine.style.left = '0';
            courseLine.style.width = '100%';
            courseLine.style.height = '2px';
            courseLine.style.backgroundColor = 'white';
            canvas.appendChild(courseLine);
        }

        // Place the flag based on the round and its distance
        function placeFlag() {
            const holeXPos = (holes[currentRound] / 1500) * canvas.offsetWidth;
            const flag = document.getElementById("flag");
            flag.style.left = holeXPos + "px";
            flag.style.display = "block";
        }

        // Place the ball at the origin (0m)
        function placeBall() {
            const ball = document.getElementById("ball");
            ball.style.left = "0px";
        }

        // Function to handle the shooting action
        function playRound() {
            const speed = parseFloat(document.getElementById("speed").value);
            let angle = parseFloat(document.getElementById("angle").value);
            const clubMultiplier = parseInt(document.getElementById("club").value);

            if (isNaN(speed) || isNaN(angle) || speed < 1 || speed > 10 || angle < -90 || angle > 90) {
                document.getElementById("message").innerText = "Please enter valid speed and angle values!";
                return;
            }

            shootCounter++; // Increment shoot counter
            totalShots++; // Increment total shots
            document.getElementById("shootCount").innerText = `Shots taken this round: ${shootCounter}`;
            document.getElementById("totalShootCount").innerText = `Total shots: ${totalShots}`;

            // Calculate ball position
            const initialVelocity = speed * clubMultiplier + wind;
            const radianAngle = (Math.PI / 180) * angle;
            const distance = Math.round((initialVelocity ** 2 * Math.sin(2 * radianAngle)) / 9.8);

            // Update current position
            currentPosition += distance;

            // Get the current hole distance
            const holeDistance = holes[currentRound];
            const distanceToHole = Math.abs(holeDistance - currentPosition);

            // Animate ball movement
            animateBall(distance);

            // Update the round or continue
            if (distanceToHole < 5) {
                document.getElementById("message").innerText = `Hole ${currentRound + 1}: ðŸŽ‰ Hole in one! It took you ${shootCounter} shots this round.`;
                document.getElementById("nextButton").style.display = "inline"; // Show "Next Hole" button
            } else {
                document.getElementById("message").innerText = `Hole ${currentRound + 1}: You hit the ball ${distance} meters. You're ${distanceToHole} meters from the hole.`;
            }
        }

        // Animate the ball moving toward the hole
        function animateBall(distance) {
            const ball = document.getElementById("ball");
            const stepSize = 5; // Speed of animation (higher value = faster)
            const holePosition = (holes[currentRound] / 1500) * canvas.offsetWidth;

            let currentLeft = 0; // Start from the origin
            ball.style.left = currentLeft + "px"; // Ensure the ball starts at the beginning

            let moveInterval = setInterval(() => {
                if (currentLeft < holePosition) {
                    currentLeft += stepSize; // Move the ball
                    ball.style.left = currentLeft + "px";
                } else {
                    clearInterval(moveInterval); // Stop animation when the ball passes the hole
                }
            }, 20);
        }

        // Function to handle moving to the next hole
        function nextHole() {
            if (currentRound >= holes.length - 1) {
                document.getElementById("message").innerText = "Game Over! Thanks for playing!";
                document.getElementById("nextButton").style.display = "none"; // Hide "Next Hole" button
                return;
            }

            currentRound++; // Move to the next round
            currentPosition = 0; // Reset position for the new hole
            shootCounter = 0; // Reset shoot counter for the current round
            wind = Math.random() * 20 - 10; // Generate new wind
            updateRoundDetails(); // Update the details for the next round

            // Reset the canvas and ball
            placeBall();
            placeFlag();
        }

        // Initialize the game
        drawCourseLine();
        placeFlag();
        placeBall();
    </script>
</body>
</html>
